function getUrlVars(t){t||(t=window.location.href);const e={};let o;const n=t.slice(t.indexOf("?")+1).split("&");for(let t=0;t<n.length;t++)o=n[t].split("="),e[o[0]]=o[1];return e}$(document).ready((function(){$("input.book-leave-from-input").on("change",(function(t){t.stopPropagation();const e=$("input.book-leave-from-input").datepicker("getDate");if(!e)return void console.log("No from date");const o=$("input.book-leave-to-input").datepicker("getDate");(!o||o&&o.getTime()<e.getTime())&&$("input.book-leave-to-input").datepicker("setDate",$("input.book-leave-from-input").datepicker("getFormattedDate"))}))})),jQuery.fn.datepicker.dates["en-GB"]={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",monthsTitle:"Months",clear:"Clear",weekStart:1,format:"dd/mm/yyyy"},$((function(){$('[data-toggle="tooltip"]').tooltip()})),$((function(){$('[data-toggle="popover"]').popover()})),$("#add_secondary_supervisers_modal").on("show.bs.modal",(function(t){const e=$(t.relatedTarget),o=e.data("department_name"),n=e.data("department_id");$(this).find(".modal-title strong").text(o),$(".modal .modal-body").css("overflow-y","auto"),$(".modal .modal-body").css("max-height",.7*$(window).height()),$(this).find(".modal-body").html('<p class="text-center"><i class="fa fa-refresh fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span></p>').load("/settings/departments/available-supervisors/"+n+"/")})),$(document).ready((function(){$("#team_view_month_select_btn").datepicker().on("changeDate",(function(t){const e=$(t.currentTarget).data("tom"),o=document.createElement("form");o.method="GET",o.action=e;const n=getUrlVars(e);return n.date=t.format("yyyy-mm"),$.each(n,(function(t,e){const n=document.createElement("input");n.name=t,n.value=e,n.type="hidden",o.appendChild(n)})),document.body.appendChild(o),o.submit()}))})),$(document).ready((function(){$("[data-tom-color-picker] a").on("click",(function(t){t.stopPropagation(),$(t.target).closest(".dropdown-menu").dropdown("toggle");const e=$(t.target).data("tom-color-picker-css-class");return $(t.target).closest("[data-tom-color-picker]").find("button.dropdown-toggle").attr("class",(function(t,e){return e.replace(/leave_type_color_\d+/g,"")})).addClass(e),$(t.target).closest("[data-tom-color-picker]").find('input[type="hidden"]').attr("value",e),!1}))})),$(document).ready((function(){$(".user-details-summary-trigger").popover({title:"Employee summary",html:!0,trigger:"hover",placement:"auto",delay:{show:1e3,hide:10},content:function(){const t="tmp-id-"+$.now();return function(t,e){return $.ajax({url:"/users/summary/"+t+"/",success:function(t){$("#"+e).html(t)}}),'<div id="'+e+'">Loading...</div>'}($(this).attr("data-user-id"),t)}})})),$(document).ready((function(){$(".leave-details-summary-trigger").popover({title:"Leave summary",html:!0,trigger:"hover",placement:"auto",delay:{show:1e3,hide:10},content:function(){const t=$(this).attr("data-leave-id");console.log("leave id: ",t);return function(t,e){return console.log("Fetching details for Leave ID:",t),$.ajax({url:"/calendar/leave-summary/"+t+"/",success:function(o){console.log("Received response for Leave ID:",t),$("#"+e).html(o)}}),'<div id="'+e+'">Loading...</div>'}(t,"tmp-id-"+$.now())}})})),$(document).ready((function(){const t=()=>{"function"==typeof $.ajax&&$.ajax({url:"/api/v1/notifications/",success:function(t){const e=t.error,o=t.data;if(e)return void console.log("Failed to fetch notifications");const n=$("#header-notification-dropdown ul.dropdown-menu"),a=$("#header-notification-dropdown .notification-badge");if(!o||!o.length)return a.addClass("hidden"),n.empty(),n.append('<li class="dropdown-header">No notifications</li>'),void(document.title=document.title.replace(/\(\d+\)\s*/,""));const r=o.map((function(t){return t.numberOfRequests})).reduce((function(t,e){return t+e}),0);a.removeClass("hidden").html(r),document.title.startsWith("(")?document.title=document.title.replace(/\(\d+\)/,"("+r+")"):document.title="("+r+") "+document.title,n.empty();for(let t=0;t<o.length;t++){const e=o[t];n.append('<li><a href="'+e.link+'">'+e.label+"</a></li>")}}}),setTimeout(t,3e4)};t()}));